{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000\n});\nconst getCurrentUserId = () => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  return user ? user.id : null;\n};\nexport const getBooks = () => API.get('/books');\nexport const searchBooks = term => API.get(`/books/search?term=${encodeURIComponent(term)}`);\nexport const filterBooksByGenre = genre => API.get(`/books/filter/${encodeURIComponent(genre)}`);\nexport const addToCart = bookId => {\n  const userId = getCurrentUserId();\n  if (!userId) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n  return API.post('/cart/add', {\n    userId,\n    bookId\n  });\n};\nexport const getCartItems = () => {\n  const userId = getCurrentUserId();\n  if (!userId) {\n    return Promise.resolve({\n      data: []\n    });\n  }\n  return API.get(`/cart?userId=${userId}`);\n};\nexport const removeFromCart = cartItemId => {\n  const userId = getCurrentUserId();\n  if (!userId) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n  return API.delete(`/cart/${cartItemId}`, {\n    data: {\n      userId\n    }\n  });\n};\nexport const clearCart = () => {\n  const userId = getCurrentUserId();\n  if (!userId) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n  return API.delete('/cart/clear', {\n    data: {\n      userId\n    }\n  });\n};\nexport const loginUser = (username, password) => {\n  return API.post('/login', {\n    username,\n    password\n  });\n};\nexport const registerUser = (username, password) => {\n  return API.post('/register', {\n    username,\n    password\n  });\n};\nAPI.interceptors.response.use(response => response, error => {\n  var _error$response, _error$config;\n  console.error('API Error:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url);\n  return Promise.reject(error);\n});\nexport default API;","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","getCurrentUserId","user","JSON","parse","localStorage","getItem","id","getBooks","get","searchBooks","term","encodeURIComponent","filterBooksByGenre","genre","addToCart","bookId","userId","Promise","reject","Error","post","getCartItems","resolve","data","removeFromCart","cartItemId","delete","clearCart","loginUser","username","password","registerUser","interceptors","response","use","error","_error$response","_error$config","console","status","config","url"],"sources":["C:/Users/leokr/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 10000,\r\n});\r\n\r\nconst getCurrentUserId = () => {\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  return user ? user.id : null;\r\n};\r\n\r\nexport const getBooks = () => API.get('/books');\r\nexport const searchBooks = (term) => API.get(`/books/search?term=${encodeURIComponent(term)}`);\r\nexport const filterBooksByGenre = (genre) => API.get(`/books/filter/${encodeURIComponent(genre)}`);\r\n\r\nexport const addToCart = (bookId) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  return API.post('/cart/add', { userId, bookId });\r\n};\r\n\r\nexport const getCartItems = () => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) {\r\n    return Promise.resolve({ data: [] });\r\n  }\r\n  return API.get(`/cart?userId=${userId}`);\r\n};\r\n\r\nexport const removeFromCart = (cartItemId) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  return API.delete(`/cart/${cartItemId}`, { data: { userId } });\r\n};\r\n\r\nexport const clearCart = () => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  return API.delete('/cart/clear', { data: { userId } });\r\n};\r\n\r\nexport const loginUser = (username, password) => {\r\n  return API.post('/login', { username, password });\r\n};\r\n\r\nexport const registerUser = (username, password) => {\r\n  return API.post('/register', { username, password });\r\n};\r\n\r\nAPI.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    console.error('API Error:', error.response?.status, error.config?.url);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}