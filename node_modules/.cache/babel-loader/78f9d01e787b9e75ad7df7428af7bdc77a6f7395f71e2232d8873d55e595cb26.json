{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000 // Add timeout\n});\n\n// Get current user ID\nconst getCurrentUserId = () => {\n  return 1; // Default to user 1 for demo\n};\n\n// ========== BOOK APIs ==========\nexport const getBooks = () => API.get('/books');\nexport const searchBooks = term => API.get(`/books/search?term=${encodeURIComponent(term)}`);\nexport const filterBooksByGenre = genre => API.get(`/books/filter/${encodeURIComponent(genre)}`);\n\n// ========== CART APIs ==========\nexport const addToCart = (bookId, quantity = 1) => {\n  const userId = getCurrentUserId();\n  console.log('Adding to cart:', {\n    userId,\n    bookId,\n    quantity\n  });\n  return API.post('/cart/add', {\n    userId,\n    bookId,\n    quantity\n  });\n};\nexport const getCartItems = () => {\n  // No user ID needed - backend uses default user 1\n  return API.get('/cart');\n};\nexport const removeFromCart = cartItemId => {\n  console.log('Removing cart item:', cartItemId);\n  return API.delete(`/cart/${cartItemId}`);\n};\nexport const updateCartQuantity = (cartItemId, quantity) => {\n  console.log('Updating cart quantity:', {\n    cartItemId,\n    quantity\n  });\n  return API.put(`/cart/${cartItemId}`, {\n    quantity\n  });\n};\nexport const clearCart = () => {\n  const userId = getCurrentUserId();\n  return API.delete(`/cart/clear/${userId}`);\n};\n\n// ========== HELPER FUNCTIONS ==========\nexport const getCartItemCount = async () => {\n  try {\n    const response = await getCartItems();\n    return response.data.length;\n  } catch (error) {\n    console.error('Error getting cart count:', error);\n    return 0;\n  }\n};\n\n// Add error interceptor\nAPI.interceptors.response.use(response => {\n  console.log('✅ API Response:', {\n    url: response.config.url,\n    status: response.status,\n    data: response.data\n  });\n  return response;\n}, error => {\n  var _error$config, _error$response, _error$response2;\n  console.error('❌ API Error:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    message: error.message,\n    responseData: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data\n  });\n  return Promise.reject(error);\n});\nexport default API;","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","getCurrentUserId","getBooks","get","searchBooks","term","encodeURIComponent","filterBooksByGenre","genre","addToCart","bookId","quantity","userId","console","log","post","getCartItems","removeFromCart","cartItemId","delete","updateCartQuantity","put","clearCart","getCartItemCount","response","data","length","error","interceptors","use","url","config","status","_error$config","_error$response","_error$response2","message","responseData","Promise","reject"],"sources":["C:/Users/leokr/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 10000, // Add timeout\r\n});\r\n\r\n// Get current user ID\r\nconst getCurrentUserId = () => {\r\n  return 1; // Default to user 1 for demo\r\n};\r\n\r\n// ========== BOOK APIs ==========\r\nexport const getBooks = () => API.get('/books');\r\nexport const searchBooks = (term) => API.get(`/books/search?term=${encodeURIComponent(term)}`);\r\nexport const filterBooksByGenre = (genre) => API.get(`/books/filter/${encodeURIComponent(genre)}`);\r\n\r\n// ========== CART APIs ==========\r\nexport const addToCart = (bookId, quantity = 1) => {\r\n  const userId = getCurrentUserId();\r\n  console.log('Adding to cart:', { userId, bookId, quantity });\r\n  return API.post('/cart/add', { userId, bookId, quantity });\r\n};\r\n\r\nexport const getCartItems = () => {\r\n  // No user ID needed - backend uses default user 1\r\n  return API.get('/cart');\r\n};\r\n\r\nexport const removeFromCart = (cartItemId) => {\r\n  console.log('Removing cart item:', cartItemId);\r\n  return API.delete(`/cart/${cartItemId}`);\r\n};\r\n\r\nexport const updateCartQuantity = (cartItemId, quantity) => {\r\n  console.log('Updating cart quantity:', { cartItemId, quantity });\r\n  return API.put(`/cart/${cartItemId}`, { quantity });\r\n};\r\n\r\nexport const clearCart = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.delete(`/cart/clear/${userId}`);\r\n};\r\n\r\n// ========== HELPER FUNCTIONS ==========\r\nexport const getCartItemCount = async () => {\r\n  try {\r\n    const response = await getCartItems();\r\n    return response.data.length;\r\n  } catch (error) {\r\n    console.error('Error getting cart count:', error);\r\n    return 0;\r\n  }\r\n};\r\n\r\n// Add error interceptor\r\nAPI.interceptors.response.use(\r\n  (response) => {\r\n    console.log('✅ API Response:', {\r\n      url: response.config.url,\r\n      status: response.status,\r\n      data: response.data\r\n    });\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error('❌ API Error:', {\r\n      url: error.config?.url,\r\n      status: error.response?.status,\r\n      message: error.message,\r\n      responseData: error.response?.data\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}