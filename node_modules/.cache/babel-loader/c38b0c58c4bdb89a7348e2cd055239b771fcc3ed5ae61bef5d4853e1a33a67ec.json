{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000\n});\n\n// Get current user ID from localStorage\nconst getCurrentUser = () => {\n  const userStr = localStorage.getItem('user');\n  return userStr ? JSON.parse(userStr) : null;\n};\n\n// ========== BOOK APIs ==========\nexport const getBooks = () => API.get('/books');\nexport const searchBooks = term => API.get(`/books/search?term=${encodeURIComponent(term)}`);\nexport const filterBooksByGenre = genre => API.get(`/books/filter/${encodeURIComponent(genre)}`);\n\n// ========== CART APIs ==========\nexport const addToCart = bookId => {\n  const user = getCurrentUser();\n  if (!user || !user.id) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n  return API.post('/cart/add', {\n    userId: user.id,\n    bookId\n  });\n};\nexport const getCartItems = () => {\n  const user = getCurrentUser();\n  if (!user || !user.id) {\n    return Promise.resolve({\n      data: []\n    });\n  }\n  return API.get(`/cart?userId=${user.id}`);\n};\nexport const removeFromCart = cartItemId => {\n  const user = getCurrentUser();\n  if (!user || !user.id) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n  return API.delete(`/cart/${cartItemId}`, {\n    data: {\n      userId: user.id\n    }\n  });\n};\n\n// SIMPLIFIED: Clear cart - just send userId in body\nexport const clearCart = () => {\n  const user = getCurrentUser();\n  if (!user || !user.id) {\n    return Promise.reject(new Error('User not logged in'));\n  }\n\n  // Simple POST request with userId in body\n  return API.delete('/cart/clear', {\n    data: {\n      userId: user.id\n    }\n  });\n};\n\n// ========== USER APIs ==========\nexport const loginUser = (username, password) => {\n  return API.post('/login', {\n    username,\n    password\n  });\n};\nexport const registerUser = (username, password) => {\n  return API.post('/register', {\n    username,\n    password\n  });\n};\n\n// Add response interceptor\nAPI.interceptors.response.use(response => response, error => {\n  var _error$response, _error$config;\n  console.error('API Error:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url);\n  return Promise.reject(error);\n});\nexport default API;","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","getCurrentUser","userStr","localStorage","getItem","JSON","parse","getBooks","get","searchBooks","term","encodeURIComponent","filterBooksByGenre","genre","addToCart","bookId","user","id","Promise","reject","Error","post","userId","getCartItems","resolve","data","removeFromCart","cartItemId","delete","clearCart","loginUser","username","password","registerUser","interceptors","response","use","error","_error$response","_error$config","console","status","config","url"],"sources":["C:/Users/leokr/project/src/services/api.js"],"sourcesContent":["\r\nimport axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 10000,\r\n});\r\n\r\n// Get current user ID from localStorage\r\nconst getCurrentUser = () => {\r\n  const userStr = localStorage.getItem('user');\r\n  return userStr ? JSON.parse(userStr) : null;\r\n};\r\n\r\n// ========== BOOK APIs ==========\r\nexport const getBooks = () => API.get('/books');\r\nexport const searchBooks = (term) => API.get(`/books/search?term=${encodeURIComponent(term)}`);\r\nexport const filterBooksByGenre = (genre) => API.get(`/books/filter/${encodeURIComponent(genre)}`);\r\n\r\n// ========== CART APIs ==========\r\nexport const addToCart = (bookId) => {\r\n  const user = getCurrentUser();\r\n  if (!user || !user.id) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  return API.post('/cart/add', { userId: user.id, bookId });\r\n};\r\n\r\nexport const getCartItems = () => {\r\n  const user = getCurrentUser();\r\n  if (!user || !user.id) {\r\n    return Promise.resolve({ data: [] });\r\n  }\r\n  return API.get(`/cart?userId=${user.id}`);\r\n};\r\n\r\nexport const removeFromCart = (cartItemId) => {\r\n  const user = getCurrentUser();\r\n  if (!user || !user.id) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  return API.delete(`/cart/${cartItemId}`, { \r\n    data: { userId: user.id } \r\n  });\r\n};\r\n\r\n// SIMPLIFIED: Clear cart - just send userId in body\r\nexport const clearCart = () => {\r\n  const user = getCurrentUser();\r\n  if (!user || !user.id) {\r\n    return Promise.reject(new Error('User not logged in'));\r\n  }\r\n  \r\n  // Simple POST request with userId in body\r\n  return API.delete('/cart/clear', {\r\n    data: { userId: user.id }\r\n  });\r\n};\r\n\r\n// ========== USER APIs ==========\r\nexport const loginUser = (username, password) => {\r\n  return API.post('/login', { username, password });\r\n};\r\n\r\nexport const registerUser = (username, password) => {\r\n  return API.post('/register', { username, password });\r\n};\r\n\r\n// Add response interceptor\r\nAPI.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    console.error('API Error:', error.response?.status, error.config?.url);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}