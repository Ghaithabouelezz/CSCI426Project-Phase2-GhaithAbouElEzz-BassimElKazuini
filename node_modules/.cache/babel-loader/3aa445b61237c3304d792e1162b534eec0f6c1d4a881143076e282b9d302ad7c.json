{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000\n});\n\n// Get current user ID from localStorage\nconst getCurrentUserId = () => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  return user ? user.id : 1; // Default to 1 if no user logged in\n};\n\n// ========== BOOK APIs ==========\nexport const getBooks = () => API.get('/books');\nexport const searchBooks = term => API.get(`/books/search?term=${encodeURIComponent(term)}`);\nexport const filterBooksByGenre = genre => API.get(`/books/filter/${encodeURIComponent(genre)}`);\n\n// ========== CART APIs ==========\nexport const addToCart = bookId => {\n  const userId = getCurrentUserId();\n  console.log('Adding to cart for user:', userId, 'book:', bookId);\n  return API.post('/cart/add', {\n    userId,\n    bookId\n  });\n};\nexport const getCartItems = () => {\n  const userId = getCurrentUserId();\n  return API.get(`/cart?userId=${userId}`);\n};\nexport const removeFromCart = cartItemId => {\n  const userId = getCurrentUserId();\n  console.log('Removing cart item:', cartItemId, 'for user:', userId);\n  return API.delete(`/cart/${cartItemId}`, {\n    data: {\n      userId\n    }\n  });\n};\nexport const clearCart = () => {\n  const userId = getCurrentUserId();\n  return API.delete(`/cart/clear`, {\n    data: {\n      userId\n    }\n  });\n};\nexport const getCartItemCount = async () => {\n  try {\n    const userId = getCurrentUserId();\n    const response = await API.get(`/cart/count?userId=${userId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error getting cart count:', error);\n    return {\n      count: 0,\n      totalItems: 0\n    };\n  }\n};\n\n// ========== USER APIs ==========\nexport const loginUser = (username, password) => {\n  return API.post('/login', {\n    username,\n    password\n  });\n};\nexport const registerUser = (username, password) => {\n  return API.post('/register', {\n    username,\n    password\n  });\n};\n\n// Logout function\nexport const logoutUser = () => {\n  localStorage.removeItem('user');\n  return Promise.resolve();\n};\n\n// Add error interceptor\nAPI.interceptors.response.use(response => {\n  console.log('✅ API Response:', response.config.url, response.status);\n  return response;\n}, error => {\n  var _error$config, _error$response;\n  console.error('❌ API Error:', (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url, (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, error.message);\n  return Promise.reject(error);\n});\nexport default API;","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","getCurrentUserId","user","JSON","parse","localStorage","getItem","id","getBooks","get","searchBooks","term","encodeURIComponent","filterBooksByGenre","genre","addToCart","bookId","userId","console","log","post","getCartItems","removeFromCart","cartItemId","delete","data","clearCart","getCartItemCount","response","error","count","totalItems","loginUser","username","password","registerUser","logoutUser","removeItem","Promise","resolve","interceptors","use","config","url","status","_error$config","_error$response","message","reject"],"sources":["C:/Users/leokr/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 10000,\r\n});\r\n\r\n// Get current user ID from localStorage\r\nconst getCurrentUserId = () => {\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  return user ? user.id : 1; // Default to 1 if no user logged in\r\n};\r\n\r\n// ========== BOOK APIs ==========\r\nexport const getBooks = () => API.get('/books');\r\nexport const searchBooks = (term) => API.get(`/books/search?term=${encodeURIComponent(term)}`);\r\nexport const filterBooksByGenre = (genre) => API.get(`/books/filter/${encodeURIComponent(genre)}`);\r\n\r\n// ========== CART APIs ==========\r\nexport const addToCart = (bookId) => {\r\n  const userId = getCurrentUserId();\r\n  console.log('Adding to cart for user:', userId, 'book:', bookId);\r\n  return API.post('/cart/add', { userId, bookId });\r\n};\r\n\r\nexport const getCartItems = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.get(`/cart?userId=${userId}`);\r\n};\r\n\r\nexport const removeFromCart = (cartItemId) => {\r\n  const userId = getCurrentUserId();\r\n  console.log('Removing cart item:', cartItemId, 'for user:', userId);\r\n  return API.delete(`/cart/${cartItemId}`, { data: { userId } });\r\n};\r\n\r\nexport const clearCart = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.delete(`/cart/clear`, { data: { userId } });\r\n};\r\n\r\nexport const getCartItemCount = async () => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const response = await API.get(`/cart/count?userId=${userId}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error getting cart count:', error);\r\n    return { count: 0, totalItems: 0 };\r\n  }\r\n};\r\n\r\n// ========== USER APIs ==========\r\nexport const loginUser = (username, password) => {\r\n  return API.post('/login', { username, password });\r\n};\r\n\r\nexport const registerUser = (username, password) => {\r\n  return API.post('/register', { username, password });\r\n};\r\n\r\n// Logout function\r\nexport const logoutUser = () => {\r\n  localStorage.removeItem('user');\r\n  return Promise.resolve();\r\n};\r\n\r\n// Add error interceptor\r\nAPI.interceptors.response.use(\r\n  (response) => {\r\n    console.log('✅ API Response:', response.config.url, response.status);\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error('❌ API Error:', error.config?.url, error.response?.status, error.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}