{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Get current user ID (for now, we'll use a mock user)\n// In a real app, this would come from authentication\nconst getCurrentUserId = () => {\n  // For demo, use user ID 1 (the testuser we created in database)\n  return 1;\n};\n\n// ========== BOOK APIs ==========\nexport const getBooks = () => API.get('/books');\nexport const searchBooks = term => API.get(`/books/search?term=${term}`);\nexport const filterBooksByGenre = genre => API.get(`/books/filter/${genre}`);\n\n// ========== CART APIs ==========\nexport const addToCart = (bookId, quantity = 1) => {\n  const userId = getCurrentUserId();\n  return API.post('/cart/add', {\n    userId,\n    bookId,\n    quantity\n  });\n};\nexport const getCartItems = () => {\n  const userId = getCurrentUserId();\n  return API.get(`/cart/${userId}`);\n};\nexport const removeFromCart = cartId => {\n  return API.delete(`/cart/remove/${cartId}`);\n};\nexport const updateCartQuantity = (cartId, quantity) => {\n  return API.put(`/cart/update/${cartId}`, {\n    quantity\n  });\n};\nexport const clearCart = () => {\n  const userId = getCurrentUserId();\n  return API.delete(`/cart/clear/${userId}`);\n};\n\n// ========== CHECKOUT API ==========\nexport const processCheckout = (cartItems, totalAmount) => {\n  const userId = getCurrentUserId();\n  return API.post('/checkout', {\n    userId,\n    items: cartItems,\n    totalAmount,\n    timestamp: new Date().toISOString()\n  });\n};\n\n// ========== USER APIs ==========\nexport const getCurrentUser = () => {\n  const userId = getCurrentUserId();\n  return API.get(`/users/${userId}`);\n};\n\n// ========== HELPER FUNCTIONS ==========\nexport const getCartItemCount = async () => {\n  try {\n    const response = await getCartItems();\n    return response.data.length;\n  } catch (error) {\n    console.error('Error getting cart count:', error);\n    return 0;\n  }\n};\nexport const addMultipleToCart = async books => {\n  const results = [];\n  for (const book of books) {\n    try {\n      const response = await addToCart(book.id, book.quantity || 1);\n      results.push({\n        bookId: book.id,\n        success: true,\n        data: response.data\n      });\n    } catch (error) {\n      results.push({\n        bookId: book.id,\n        success: false,\n        error: error.message\n      });\n    }\n  }\n  return results;\n};\n\n// Export the base API instance for custom requests\nexport default API;","map":{"version":3,"names":["axios","API","create","baseURL","headers","getCurrentUserId","getBooks","get","searchBooks","term","filterBooksByGenre","genre","addToCart","bookId","quantity","userId","post","getCartItems","removeFromCart","cartId","delete","updateCartQuantity","put","clearCart","processCheckout","cartItems","totalAmount","items","timestamp","Date","toISOString","getCurrentUser","getCartItemCount","response","data","length","error","console","addMultipleToCart","books","results","book","id","push","success","message"],"sources":["C:/Users/leokr/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Get current user ID (for now, we'll use a mock user)\r\n// In a real app, this would come from authentication\r\nconst getCurrentUserId = () => {\r\n  // For demo, use user ID 1 (the testuser we created in database)\r\n  return 1;\r\n};\r\n\r\n// ========== BOOK APIs ==========\r\nexport const getBooks = () => API.get('/books');\r\nexport const searchBooks = (term) => API.get(`/books/search?term=${term}`);\r\nexport const filterBooksByGenre = (genre) => API.get(`/books/filter/${genre}`);\r\n\r\n// ========== CART APIs ==========\r\nexport const addToCart = (bookId, quantity = 1) => {\r\n  const userId = getCurrentUserId();\r\n  return API.post('/cart/add', { userId, bookId, quantity });\r\n};\r\n\r\nexport const getCartItems = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.get(`/cart/${userId}`);\r\n};\r\n\r\nexport const removeFromCart = (cartId) => {\r\n  return API.delete(`/cart/remove/${cartId}`);\r\n};\r\n\r\nexport const updateCartQuantity = (cartId, quantity) => {\r\n  return API.put(`/cart/update/${cartId}`, { quantity });\r\n};\r\n\r\nexport const clearCart = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.delete(`/cart/clear/${userId}`);\r\n};\r\n\r\n// ========== CHECKOUT API ==========\r\nexport const processCheckout = (cartItems, totalAmount) => {\r\n  const userId = getCurrentUserId();\r\n  return API.post('/checkout', { \r\n    userId, \r\n    items: cartItems, \r\n    totalAmount,\r\n    timestamp: new Date().toISOString()\r\n  });\r\n};\r\n\r\n// ========== USER APIs ==========\r\nexport const getCurrentUser = () => {\r\n  const userId = getCurrentUserId();\r\n  return API.get(`/users/${userId}`);\r\n};\r\n\r\n// ========== HELPER FUNCTIONS ==========\r\nexport const getCartItemCount = async () => {\r\n  try {\r\n    const response = await getCartItems();\r\n    return response.data.length;\r\n  } catch (error) {\r\n    console.error('Error getting cart count:', error);\r\n    return 0;\r\n  }\r\n};\r\n\r\nexport const addMultipleToCart = async (books) => {\r\n  const results = [];\r\n  for (const book of books) {\r\n    try {\r\n      const response = await addToCart(book.id, book.quantity || 1);\r\n      results.push({ bookId: book.id, success: true, data: response.data });\r\n    } catch (error) {\r\n      results.push({ bookId: book.id, success: false, error: error.message });\r\n    }\r\n  }\r\n  return results;\r\n};\r\n\r\n// Export the base API instance for custom requests\r\nexport default API;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}